<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"fandix.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content=" 在使用 Typescript 協助我們開發專案時，由於 Typescript 可以將參數或變量定義為 Union 的形式，所以有時候當我們使用 Union 將參數與變量定義為多種型別時， Typescript 可能會不知道我們需要的是哪一種類型的數據，所以這時候就需要將參數或變量的類型進行縮小，好讓 Typescript 更清楚的知道傳入的參數是什麼類型，已進行正確的操作。">
<meta property="og:type" content="article">
<meta property="og:title" content="TypeScript - Narrowing">
<meta property="og:url" content="https://fandix.github.io/2021/09/24/Typescript/The-Basics/index.html">
<meta property="og:site_name" content="Fandix Technology Blog">
<meta property="og:description" content=" 在使用 Typescript 協助我們開發專案時，由於 Typescript 可以將參數或變量定義為 Union 的形式，所以有時候當我們使用 Union 將參數與變量定義為多種型別時， Typescript 可能會不知道我們需要的是哪一種類型的數據，所以這時候就需要將參數或變量的類型進行縮小，好讓 Typescript 更清楚的知道傳入的參數是什麼類型，已進行正確的操作。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://ithelp.ithome.com.tw/upload/images/20210914/20124767n3u6xCyYOB.jpg">
<meta property="og:image" content="https://ithelp.ithome.com.tw/upload/images/20210924/20124767wLXHRxbwNa.png">
<meta property="og:image" content="https://ithelp.ithome.com.tw/upload/images/20210924/20124767SgEKlLbCIB.png">
<meta property="og:image" content="https://ithelp.ithome.com.tw/upload/images/20210930/201247670Cv6rPZeLl.png">
<meta property="og:image" content="https://ithelp.ithome.com.tw/upload/images/20210930/20124767c1Cg21V7H6.png">
<meta property="og:image" content="https://ithelp.ithome.com.tw/upload/images/20210930/20124767mnAcEmCzHN.png">
<meta property="og:image" content="https://ithelp.ithome.com.tw/upload/images/20211001/20124767mS3h3cc95A.png">
<meta property="og:image" content="https://ithelp.ithome.com.tw/upload/images/20211001/20124767tBwRvJIunB.png">
<meta property="article:published_time" content="2021-09-24T02:06:20.000Z">
<meta property="article:modified_time" content="2021-10-01T02:21:52.047Z">
<meta property="article:author" content="Fandix Huang">
<meta property="article:tag" content="Typescript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ithelp.ithome.com.tw/upload/images/20210914/20124767n3u6xCyYOB.jpg">

<link rel="canonical" href="https://fandix.github.io/2021/09/24/Typescript/The-Basics/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>TypeScript - Narrowing | Fandix Technology Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Fandix Technology Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">It’s my own thing after I sort it out</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://fandix.github.io/2021/09/24/Typescript/The-Basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Fandix Huang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fandix Technology Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          TypeScript - Narrowing
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-09-24 10:06:20" itemprop="dateCreated datePublished" datetime="2021-09-24T10:06:20+08:00">2021-09-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-10-01 10:21:52" itemprop="dateModified" datetime="2021-10-01T10:21:52+08:00">2021-10-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Typescript/" itemprop="url" rel="index"><span itemprop="name">Typescript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p> 在使用 Typescript 協助我們開發專案時，由於 Typescript 可以將參數或變量定義為 <code>Union</code> 的形式，所以有時候當我們使用 Union 將參數與變量定義為多種型別時， Typescript 可能會不知道我們需要的是哪一種類型的數據，所以這時候就需要將參數或變量的類型進行縮小，好讓 Typescript 更清楚的知道傳入的參數是什麼類型，已進行正確的操作。</p>
<p><img src="https://ithelp.ithome.com.tw/upload/images/20210914/20124767n3u6xCyYOB.jpg" alt="https://ithelp.ithome.com.tw/upload/images/20210914/20124767n3u6xCyYOB.jpg"></p>
<span id="more"></span>

<hr>
<p>假設我們寫了一個 function 並將參數定義為 Union 型態，讓我們可以傳遞多種型態的參數進到這個 function 中</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">padLeft</span>(<span class="params">padding: <span class="built_in">number</span> | <span class="built_in">string</span>, input: <span class="built_in">string</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Array</span>(padding + <span class="number">1</span>).join(<span class="string">&quot; &quot;</span>) + input;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果以上面的例子來看的話，當我們傳入的參數型態是 <code>number</code> 的話那自然可以將結果回傳出去，但是其實不是這樣的，由於我們將參數的型別定義為 <code>number</code> 與 <code>string</code> 的 <code>Union</code> 所以 Typescript 會認為我們將傳入兩種類型的參數，所以上面的程式中無法同時滿足兩種參數類型的服務就會導致 Typescript 報錯。</p>
<p><img src="https://ithelp.ithome.com.tw/upload/images/20210924/20124767wLXHRxbwNa.png" alt="https://ithelp.ithome.com.tw/upload/images/20210924/20124767wLXHRxbwNa.png"></p>
<p>所以當遇到這種情況時就需要將參數進行 <code>Narrowing</code>，顧名思義就是讓 Typescript 對我們寫的程式判斷進行縮小，舉例來說當我們需要完成上面的程式的話，由於錯誤的內容是 Typescript 判斷我們傳入的參數可能是 string 或 number，所以當他會判斷如果傳入的參數型態是 string 的話就不能使用 <code>+</code> 處理，所以我們需要將傳入的參數進行一個限制，只有當傳入的參數型態是 <code>number</code> 時才做我們希望做的動作，所以可以將它更改為</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">padLeft</span>(<span class="params">padding: <span class="built_in">number</span> | <span class="built_in">string</span>, input: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Array</span>(padding + <span class="number">1</span>).join(<span class="string">&quot; &quot;</span>) + input;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> padding + input;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改為這樣的話 Typescript 就可以知道當我們傳進的參數型態是 number 時才進行 if 裏面的操作，這樣就可以避免 string 型態的參數也跑進 if 內的處理，這就是 Narrowing 的概念。</p>
<hr>
<h1 id="typeof-type-guards"><a href="#typeof-type-guards" class="headerlink" title="typeof type guards"></a>typeof type guards</h1><p>在上面的例子中可以看到我們使用了 <code>typeof</code> 將參數的類型進行縮小好讓 Typescript 更清楚的知道該如何對多種型態的 union 進行準確的處理，而 typeof 他可以提供我們在運行時獲得參數或變量的類型，他會返回</p>
<ul>
<li><strong>string</strong></li>
<li><strong>number</strong></li>
<li><strong>bigint</strong></li>
<li><strong>boolean</strong></li>
<li><strong>symbol</strong></li>
<li><strong>undefined</strong></li>
<li><strong>object</strong></li>
<li><strong>function</strong></li>
</ul>
<p>雖然使用 typeof 可以告訴我們這個參數或變量是什麼類型的，但要注意他並不能判斷 <code>null</code> 和 <code>object</code> 的區別所以可能會產生一些出乎意料的錯誤，舉個例子</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printAll</span>(<span class="params">strs: <span class="built_in">string</span> | <span class="built_in">string</span>[] | <span class="literal">null</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> strs === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> s <span class="keyword">of</span> strs) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(s);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> strs === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(strs);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// do nothing</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ithelp.ithome.com.tw/upload/images/20210924/20124767SgEKlLbCIB.png" alt="https://ithelp.ithome.com.tw/upload/images/20210924/20124767SgEKlLbCIB.png"></p>
<p>在上面的例子中雖然使用了 <code>typeof</code> 要將參數的型態縮小為 <code>object</code>，希望能將 <code>string[]</code> 與 <code>string</code> 進行區別（ Array 也是 object ），但是由於 null 在 <code>javascript</code> 中也被定義為 object，所以 Typescript 就會報錯，因為他認定你進行縮小的內容有可能會是 <code>null</code>，所以這樣的縮小會變成 <code>string[] | null</code> 而不是只縮小到 <code>string[]</code> 而已，所以需要特別注意這種特別的問題。</p>
<hr>
<h1 id="Truthiness-narrowing"><a href="#Truthiness-narrowing" class="headerlink" title="Truthiness narrowing"></a>Truthiness narrowing</h1><p>在 Javascript 中可以在<code>條件</code>, <code>&amp;&amp;</code>, <code>||</code>, <code>if else</code>, <code>!</code> 等中使用任何表達式，所以 if 裡面的判斷並不需要一定要是 <code>boolean</code> 比如說</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUsersOnlineMessage</span>(<span class="params">numUsersOnline: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (numUsersOnline) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`There are <span class="subst">$&#123;numUsersOnline&#125;</span> online now!`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Nobody&#x27;s here. :(&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 javascript 中會將需要進行判斷的數強制轉換為布爾值已讓其有意義，然後根據他的結果再來決定他們的分支，比如說</p>
<ul>
<li><strong>0</strong></li>
<li><strong>NaN</strong></li>
<li><strong>“” (empty string)</strong></li>
<li><strong>0n (bigint version of zero)</strong></li>
<li><strong>null</strong></li>
<li><strong>undefined</strong><br>除了上面這些會被強制轉換為 <code>false</code> 之外其他都會轉為 <code>true</code>，除了這個觀念之外還可以使用一些小技巧進行布爾值得轉換，比如說惡以使用<code>布爾函數運行值</code>或使用<code>雙重布爾否定</code> 來強制將數值轉換為布爾值</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Boolean</span>(<span class="string">&quot;hello&quot;</span>); <span class="comment">// type: boolean, value: true</span></span><br><span class="line">!!<span class="string">&quot;world&quot;</span>; <span class="comment">// type: true,    value: true</span></span><br></pre></td></tr></table></figure>

<p>可以透過這種方法防範上面提到的狀況，當使用 <code>typeof</code> 縮小為 object 時，由於 null 也是 object 所以會造成出錯，不過就可以使用這種方法避免參數是 <code>null</code> 或 <code>undefined</code>，進行再一次的縮小判斷</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printAll</span>(<span class="params">strs: <span class="built_in">string</span> | <span class="built_in">string</span>[] | <span class="literal">null</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (strs &amp;&amp; <span class="keyword">typeof</span> strs === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> s <span class="keyword">of</span> strs) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(s);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> strs === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(strs);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>雖然可以使用這種方式判斷 strs 是否是 null 但是不同寫法會產生不同的結果，比如像上面提到的將 strs 放進 <code>if else</code> 中判斷，雖然 null 會被 if else 強制轉換為 false 可以避免輸入參數是 null 的情況，但要記得如果傳入的是空字串（’’）一樣會被 if else 強制轉換成 false，所以在寫這方面的邏輯時要特別小心</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printAll</span>(<span class="params">strs: <span class="built_in">string</span> | <span class="built_in">string</span>[] | <span class="literal">null</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (strs) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> strs === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> s <span class="keyword">of</span> strs) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(s);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> strs === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(strs);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果 strs 為空字串的話也會被 if else 轉換成 false，所以就會直接跳過所有的動作導致預期的行為沒有被執行到。</p>
<hr>
<h1 id="Equality-narrowing"><a href="#Equality-narrowing" class="headerlink" title="Equality narrowing"></a>Equality narrowing</h1><p>Typescript 還可以使用 <code>switch case</code> 和<code>相等檢查</code>還縮小 typescript 的類型檢查，比如 <code>===</code>, <code>!==</code>, <code>==</code> 或 <code>!=</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params">x: <span class="built_in">string</span> | <span class="built_in">number</span>, y: <span class="built_in">string</span> | <span class="built_in">boolean</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x === y) &#123;</span><br><span class="line">    x.toUpperCase(); <span class="comment">// type: string</span></span><br><span class="line">    y.toLowerCase(); <span class="comment">// type: string</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x); <span class="comment">// type: number</span></span><br><span class="line">    <span class="built_in">console</span>.log(y); <span class="comment">// type: boolean</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的例子中由於使用嚴格判定 <code>===</code> 所以除了內容之外資料的型態也必須要一樣，所以 Typescript 就會知道這兩個參數的型別是一樣的，除了檢查資料型別之外也可以檢查特定的參數內容，記得在上面的例子中提到的 null 也是 object 的一種的情況嗎，這種情況就可以使用 <code>!==</code> 來進一步的縮小 Typescript 的型別判斷</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printAll</span>(<span class="params">strs: <span class="built_in">string</span> | <span class="built_in">string</span>[] | <span class="literal">null</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (strs !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> strs === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> s <span class="keyword">of</span> strs) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(s); <span class="comment">// type: string[]</span></span><br><span class="line">      &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> strs === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(strs); <span class="comment">// type: string</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>就算不是使用嚴格的判斷(<code>===</code>, <code>!==</code>) 也可以透過使用寬鬆的判斷（<code>==</code>, <code>!=</code>）達到縮小判斷的目的，比如可以使用 <code>something == null</code> 來檢查某個參數是否等於 null，但由於是使用寬鬆的判斷所以蹹除了檢查使否為指定的型別之外還會檢查他是否使個淺在的 undefined，同樣的如果是 <code>something == undefined</code> 的話也是同時檢查參數是 <code>null</code> 或是 <code>undefined</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Container &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">number</span> | <span class="literal">null</span> | <span class="literal">undefined</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multiplyValue</span>(<span class="params">container: Container, factor: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (container.value != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(container.value); <span class="comment">// type: number</span></span><br><span class="line">    container.value *= factor;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="The-in-operator-narrowing"><a href="#The-in-operator-narrowing" class="headerlink" title="The in operator narrowing"></a>The in operator narrowing</h1><p>Javascript 還有一個運算符可以用來檢查某個 property 是否存在於某個 object 中，他就是 <code>in</code> operator， Typescript 也會將這個行為作為縮小淺在類型的方式</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Fish = &#123; <span class="attr">swim</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> Bird = &#123; <span class="attr">fly</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> &#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">animal: Fish | Bird</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">&quot;swim&quot;</span> <span class="keyword">in</span> animal) &#123;</span><br><span class="line">    <span class="keyword">return</span> animal.swim();  <span class="comment">// type: Fish</span></span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> animal.fly();  <span class="comment">// type: Bird</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的例子中使用 <code>in</code> 運算符來確定傳入的參數中是否有 <code>swim</code> 這個 property，透過這種方式可以讓 Typescript 更精確的知道參數的資料型態，這種縮小的方式還可以同時檢查到 Union 的資料型別</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Fish = &#123; <span class="attr">swim</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> Bird = &#123; <span class="attr">fly</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> Human = &#123; swim?: <span class="function">() =&gt;</span> <span class="built_in">void</span>; fly?: <span class="function">() =&gt;</span> <span class="built_in">void</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">animal: Fish | Bird | Human</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">&#x27;swim&#x27;</span> <span class="keyword">in</span> animal) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(animal);    <span class="comment">// type: Fish | Human</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">    <span class="built_in">console</span>.log(animal);    <span class="comment">// type: Bird | Human</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="instanceof-narrowing"><a href="#instanceof-narrowing" class="headerlink" title="instanceof narrowing"></a>instanceof narrowing</h1><p>除了 <code>in</code> 來檢查某個 property 是否存在於某個 object 之外，也可以使用 <code>instanceof</code> 達到同樣的目的，與 in 不一樣的是使用 instanceof 會檢查某個 property 是否存在於這個 object 的原型鏈上而不是單純的檢查是否在 object 裏面而已，既然可以檢查某個 property 是否存在於某個 object 的原型鏈中，那麼他也可以作為縮小型別判斷的方法。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logValue</span>(<span class="params">x: <span class="built_in">Date</span> | <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="built_in">Date</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(x.toUTCString());   <span class="comment">// type: Date</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(x.toUpperCase());   <span class="comment">// type: string</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Assignments"><a href="#Assignments" class="headerlink" title="Assignments"></a>Assignments</h1><p>還記得在上面我們有提到一個觀念，對於 typescript 來說可以不需要為每一個變量都定義資料型別，因為當你對這個變量附值時 typescript 會自動推算出他的型別</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="built_in">Math</span>.random() &lt; <span class="number">0.5</span> ? <span class="number">10</span> : <span class="string">&#x27;hello world!&#x27;</span>;  <span class="comment">// type: number | string</span></span><br><span class="line"></span><br><span class="line">x = <span class="number">1</span>;  <span class="comment">// type: number</span></span><br><span class="line">x = <span class="string">&#x27;goodbye!&#x27;</span> <span class="comment">// type: string</span></span><br></pre></td></tr></table></figure>

<p>隨著不斷地變化 x 的值，typescript 也會不斷地自動推斷出他的型別，但是因為一開始在對 x 這個變量進行宣告與賦值時已經將它定義為 <code>number | string</code> 的型態了，所以如果你想要在之後將一個 <code>boolean</code> 型別的資料賦予給 x 的話則會出錯。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="built_in">Math</span>.random() &lt; <span class="number">0.5</span> ? <span class="number">10</span> : <span class="string">&#x27;hello world!&#x27;</span>;  <span class="comment">// type: number | string</span></span><br><span class="line"></span><br><span class="line">x = <span class="number">1</span>;  <span class="comment">// type: number</span></span><br><span class="line">x = <span class="literal">true</span>;  <span class="comment">// Type &#x27;boolean&#x27; is not assignable to type &#x27;string | number&#x27;.</span></span><br></pre></td></tr></table></figure>

<p><img src="https://ithelp.ithome.com.tw/upload/images/20210930/201247670Cv6rPZeLl.png" alt="https://ithelp.ithome.com.tw/upload/images/20210930/201247670Cv6rPZeLl.png"></p>
<hr>
<h1 id="Using-type-predicate"><a href="#Using-type-predicate" class="headerlink" title="Using type predicate"></a>Using type predicate</h1><p>上面介紹了許多利用 javascript 可以縮小型別判斷的方法，接著要來介紹 typescript 的方法，有時候你會希望當 function 裏面的判斷為 true 時傳入這個 Function 的參數也定義為準確的類型，這時就可以使用 <code>predicate</code> 達到這個目的，可能有點看不懂我們直接來一個例子講解會比較清楚。</p>
<p>假設今天有一個 function 是用於檢測這某個傳入的參數是否為 <code>string</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isString</span>(<span class="params">s: <span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> s === <span class="string">&#x27;string&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接著將這個判斷型別的 function 放到需要他的地方</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toUpperCase</span>(<span class="params">x: unknown</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(isString(x)) &#123;</span><br><span class="line">    x.toUpperCase();    <span class="comment">//  error</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://ithelp.ithome.com.tw/upload/images/20210930/20124767c1Cg21V7H6.png" alt="https://ithelp.ithome.com.tw/upload/images/20210930/20124767c1Cg21V7H6.png"></p>
<p>這時可能會發現 typescript 報錯了，因為對於 <code>toUpperCase</code> 這個 function 來說，由於參數的驗證被封裝在 isString 裏面，所以 x 的型別不會改變，所以導致 typescript 依然認為 x 是 <code>unknown</code> 類型，遇到這種情況的話就可以使用 <code>predicate</code>，他的目的是<code>當你的 function 驗證結果為 true 時，將參數定義為你指定的型別</code>，以上面的例子來說</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isString</span>(<span class="params">s: <span class="built_in">any</span></span>): <span class="title">s</span> <span class="title">is</span> <span class="title">string</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> s === <span class="string">&#x27;string&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>將 <code>isString</code> 進行改寫後，當 function 計算的結果為 true（參數型別為 string）時，會將參數 s 定義為 string 的型態，這樣的話就可以讓 typescript 近一步縮小型別判斷<br><img src="https://ithelp.ithome.com.tw/upload/images/20210930/20124767mnAcEmCzHN.png" alt="https://ithelp.ithome.com.tw/upload/images/20210930/20124767mnAcEmCzHN.png"></p>
<hr>
<h1 id="Discriminated-unions"><a href="#Discriminated-unions" class="headerlink" title="Discriminated unions"></a>Discriminated unions</h1><p>在上面的一些例子中雖然可以明確的縮小 typescript 的型別判定，但都是透過簡單的判定 <code>string</code>, <code>number</code> 或 <code>boolean</code> 來縮小判定，不過在開發專案的過程中需要判定的型別往往會是比較複雜的複合型別的數據，舉個例子</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Shape &#123;</span><br><span class="line">  <span class="attr">kind</span>: <span class="string">&quot;circle&quot;</span> | <span class="string">&quot;square&quot;</span>;</span><br><span class="line">  radius?: <span class="built_in">number</span>;</span><br><span class="line">  sideLength?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getArea</span>(<span class="params">shape: Shape</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.PI * shape.radius ** <span class="number">2</span>;   <span class="comment">// Object is possibly &#x27;undefined&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ithelp.ithome.com.tw/upload/images/20211001/20124767mS3h3cc95A.png" alt="https://ithelp.ithome.com.tw/upload/images/20211001/20124767mS3h3cc95A.png"></p>
<p>在這邊 typescript 會給我們一個錯誤，因為他認為 shape 中並沒有 <code>radius</code> 這個 property，可能大部人會想到上面的一些例子想到要對 <code>kind</code> 進行檢查以縮小型別的檢查</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getArea</span>(<span class="params">shape: Shape</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (shape.kind === <span class="string">&#x27;circle&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.PI * shape.radius ** <span class="number">2</span>;  <span class="comment">// Object is possibly &#x27;undefined&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ithelp.ithome.com.tw/upload/images/20211001/20124767tBwRvJIunB.png" alt="https://ithelp.ithome.com.tw/upload/images/20211001/20124767tBwRvJIunB.png"></p>
<p>即使判斷了 <code>kind</code> 依然無法準確地進行判斷，因為對於 typescript 來說，radius 這個 property 的型別是 <code>number</code> 或 <code>undefined</code>（在後面加上問號的緣故），要強制 typescript 知道一定會有這個 property 的話，可以使用 <code>non-null assertion (!)</code> 來告訴 typescript 一定存在這個 property</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getArea</span>(<span class="params">shape: Shape</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (shape.kind === <span class="string">&#x27;circle&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.PI * shape.radius! ** <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是使用這種方法會有點治標不治本，隨著專案的開發可能會不斷的更改或移動程式，到時候會留一個容易出錯的不穩定因素在這邊，所以最好的方法是將他們拆成兩種 <code>interface</code> 並利用兩種 interface 來明確的縮小型別</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Circle &#123;</span><br><span class="line">  <span class="attr">kind</span>: <span class="string">&quot;circle&quot;</span>;</span><br><span class="line">  radius: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">interface</span> Square &#123;</span><br><span class="line">  <span class="attr">kind</span>: <span class="string">&quot;square&quot;</span>;</span><br><span class="line">  sideLength: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">type</span> Shape = Circle | Square;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getArea</span>(<span class="params">sharp: Shape</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (sharp.kind === <span class="string">&#x27;circle&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.PI * shape.radius ** <span class="number">2</span>;  <span class="comment">// type: Circle</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> shape.sideLength ** <span class="number">2</span>;   <span class="comment">// type: Square</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h1><p>雖然 typescript 可以自動檢測變量或參數的型別，但對於 Union 這種複合的形式來說 typescript 可能會不能明確的瞭解要使用哪一個型別而導致 typescript 報錯，這時就需要使用一些方法幫助 typescript 縮小型別的判斷，讓 typescript 更明確的知道變量或參數是什麼型別。</p>
<ul>
<li>使用 <code>typeof</code> 判斷傳入的參數或變量是什麼型態的數據，這樣可以準確地使用那個資料型態的 method 而不會出錯</li>
<li>使用 <code>條件</code>, <code>&amp;&amp;</code>, <code>||</code>, <code>if else</code> 來判斷這個參數或變量是否存在，以免不小心調用到 <code>null</code> 或 <code>undefined</code> 等等導致出錯</li>
<li>使用<code>相等檢查（ ===, !==, ==, != ）</code>縮小類型判斷</li>
<li>使用 <code>in</code> 來檢查某個 property 是否存在於某個 object 中，以免調用到不存在的 property</li>
<li>使用 <code>instanceof</code> 檢查某個 property 是否存在於某個 object 的原型鏈中，以免調用到不存在的 property</li>
<li>使用 <code>predicate</code> 將判斷正確的參數定義為指定的型別</li>
<li>將復合的資料型態分解為較小的複合型態以達到更準確的判斷資料型態</li>
</ul>
<hr>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#typeof-type-guards">Typescript - Narrowing</a></li>
<li><a target="_blank" rel="noopener" href="https://fettblog.eu/typescript-type-predicates/">TypeScript: Type predicates</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Typescript/" rel="tag"># Typescript</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/09/23/Angular/Day33-Communicating-with-backend-services-using-HTTP/" rel="prev" title="Day33. Communicating with backend services using HTTP">
      <i class="fa fa-chevron-left"></i> Day33. Communicating with backend services using HTTP
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#typeof-type-guards"><span class="nav-number">1.</span> <span class="nav-text">typeof type guards</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Truthiness-narrowing"><span class="nav-number">2.</span> <span class="nav-text">Truthiness narrowing</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Equality-narrowing"><span class="nav-number">3.</span> <span class="nav-text">Equality narrowing</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-in-operator-narrowing"><span class="nav-number">4.</span> <span class="nav-text">The in operator narrowing</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#instanceof-narrowing"><span class="nav-number">5.</span> <span class="nav-text">instanceof narrowing</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Assignments"><span class="nav-number">6.</span> <span class="nav-text">Assignments</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Using-type-predicate"><span class="nav-number">7.</span> <span class="nav-text">Using type predicate</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Discriminated-unions"><span class="nav-number">8.</span> <span class="nav-text">Discriminated unions</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B5%90%E8%AB%96"><span class="nav-number">9.</span> <span class="nav-text">結論</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">10.</span> <span class="nav-text">Reference</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Fandix Huang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">46</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fandix Huang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
